{"version":3,"sources":["routes/history.js","services/log/index.js","services/auth/Callback.js","services/auth/ToLoginComponent.js","services/auth/Secured.js","services/auth/auth0_config.js","containers/hoc/entitiesHandler.js","components/utils/Buttons.js","components/utils/EditDeleteButtonsRow.js","components/products/Catalog.js","components/products/CatalogList.js","redux/products/catalog.js","containers/products/CatalogsContainer.js","api/crud.js","containers/hoc/entityHandler.js","components/utils/Inputs.js","components/products/CatalogForm.js","api/index.js","components/products/ArticlePublication.js","components/products/Article.js","components/products/CatalogDetail.js","containers/products/CatalogContainer.js","components/products/ArticleList.js","redux/products/article.js","containers/products/ArticlesContainer.js","components/products/ArticleForm.js","components/products/ArticleDetail.js","containers/products/ArticleContainer.js","pages/static/MiscInfoPage.js","routes/index.js","services/auth/Auth.js","services/auth/index.js","redux/reducers.js","redux/utils/sagas.js","redux/products/catalog.sagas.js","redux/products/article.sagas.js","redux/sagas.js","redux/configureStore.js","redux/middleware.js","layout/SideMenu.js","layout/Toolbar.js","layout/Main.js","layout/Layout.js","App.js","serviceWorker.js","index.js"],"names":["history","createBrowserHistory","formatLogs","msg","args","consoleLog","tags","_extractTags","filter","arg","Array","isArray","concat","push","extractTags","_extractTags2","Object","slicedToArray","length","mergedArgs","forEach","assign","mergeArgs","formattedTags","map","tag","join","time","Date","toLocaleTimeString","hour12","formattedMsg","keys","Log","debug","_len","arguments","_key","console","info","_len2","_key2","warn","_len3","_key3","error","_len4","_key4","Callback","this","props","auth","handleAuthentication","test","location","hash","replace","react_default","a","createElement","Component","BlankComponent","secured","SecuredComponent","optionalProps","isAuthenticated","mergedProps","requestedUrl","pathname","search","localStorage","setItem","SAVED_URL","login","base_url","process","BASE_URL","AUTH0_CONFIG","domain","clientID","redirectUri","logoutUrl","audience","entitiesHandler","WrappedComponent","_React$Component","_class","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","key","value","load","_this","entities","deleteEntity","id","delete","React","CreateButton","url","Link","to","className","defaultProps","DeleteButton","onClick","deleteFunc","EditDeleteButtonsRow","confirmMsg","deleteMsg","window","confirm","editPath","Buttons_DeleteButton","CATALOG_API_PATH","CATALOG_PATH","PropTypes","number","string","CatalogList","catalog","index","name","description","publications_count","user","auth0_id","EditDeleteButtonsRow_EditDeleteButtonsRow","Buttons_CreateButton","LOAD","LOADED","CLEAR","LIST_LOAD","LIST_LOADED","NEW","CREATE","CREATED","UPDATE","UPDATED","DELETE","DELETED","reducer","state","undefined","action","type","catalogs","payload","objectSpread","list","entity","code","updatedList","deleteCatalog","meta","CatalogsContainer","connect","dispatch","CRUD","READ","EDIT","entityHandler","FormComponent","DetailComponent","_class2","_getPrototypeOf2","call","saveEntity","update","create","match","params","new","unmount","_this2","crud","handleValueChange","deleteById","IdHiddenInput","propsType","CatalogForm","event","setState","defineProperty","target","handleFormSubmit","preventDefault","onSubmit","Inputs_IdHiddenInput","required","placeholder","onChange","API_URL","HEADERS","Accept","Content-Type","Authorization","getItem","ACCESS_TOKEN","call_api","method","body","options","headers","JSON","stringify","fetch","then","resp","status","response","json","catch","err","API","get","post","patch","put","ArticlePublications","publication","article","handleDeletion","SearchProductForm","entityName","searchName","handleSearchNameChange","SearchedProducts","searchedList","createPublication","ArticlePublicationsManager","productId","buildPublication","data","publications","deletePublication","success","prevState","publ","searchUrl","searchResults","_this3","ArticlePublication_ArticlePublications","ArticlePublication_SearchProductForm","ArticlePublication_SearchedProducts","ARTICLE_API_PATH","ARTICLE_PATH","CatalogDetail","ArticlePublication_ArticlePublicationsManager","article_publications","articleId","catalog_id","article_id","CatalogContainer","loadCatalog","createCatalog","postProcessing","updateCatalog","ArticleList","articles","deleteArticle","ArticlesContainer","ArticleForm","ArticleDetail","catalogId","ArticleContainer","loadArticle","createArticle","updateArticle","MiscInfoPage","a_token","i_token","ID_TOKEN","ex_date","EXPIRES_AT","href","rel","Routes","Switch","Route","exact","path","component","render","Callback_Callback","products_CatalogContainer","products_ArticleContainer","Auth","auth0","WebAuth","responseType","scope","bind","logout","redirect_url","authorize","parseHash","authResult","accessToken","idToken","setSession","redirectUrl","removeItem","expiresAt","expiresIn","getTime","logoutPath","parse","reducers","extractPostProcessing","Function","loadCatalogs","watchCatalogs","regenerator_default","wrap","_context","prev","next","sent","stop","_marked","_context2","_marked2","_context3","_marked3","_context4","_marked4","_context5","_marked5","_context6","takeEvery","_marked6","loadArticles","watchArticles","article_sagas_marked","article_sagas_marked2","article_sagas_marked3","article_sagas_marked4","article_sagas_marked5","article_sagas_marked6","onStart","mySaga","sagas_marked","all","catalogsSagas","articlesSagas","sagas_marked2","rootReducers","combineReducers","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","result","getState","run","mySagas","SideMenu","NavLink","activeClassName","Toolbar","_event","document","getElementById","classList","toggle","toggleSideMenu","Main","routes_Routes","Layout","SideMenu_SideMenu","Toolbar_Toolbar","Main_Main","handleBackdropClick","App","es","BrowserRouter","Layout_Layout","Boolean","hostname","ReactDOM","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c158e889.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","/**\r\n * Extract tags from all arguments.\r\n * @param {Array} args\r\n */\r\nconst extractTags = args => {\r\n  // extract tags\r\n  let tags = [];\r\n  // if tags are string or array:\r\n  let filteredArgs = args.filter(arg => {\r\n    // Array is assumed to be array of string\r\n    if (Array.isArray(arg)) {\r\n      tags = tags.concat(arg);\r\n    }\r\n    // Simple string\r\n    else if (typeof arg === \"string\") {\r\n      tags.push(arg);\r\n    }\r\n    // Parameters\r\n    else if (arg && arg.tags) {\r\n      tags = tags.concat(arg.tags);\r\n      delete arg.tags;\r\n    }\r\n    // Not a tag\r\n    else {\r\n      return true;\r\n    }\r\n    // all checked cases are false:\r\n    return false;\r\n  });\r\n  return [filteredArgs, tags];\r\n};\r\n\r\n/**\r\n * Merge all provided arguments into a single object. It is assumed that `args`\r\n * is an array of Objects.\r\n *\r\n * Check if object if empty: https://stackoverflow.com/a/32108184/4906586\r\n * @param {Array} args\r\n */\r\nconst mergeArgs = args => {\r\n  if (args.length) {\r\n    let mergedArgs = {};\r\n    args.forEach(arg => (mergedArgs = Object.assign(mergedArgs, arg)));\r\n    return mergedArgs;\r\n  }\r\n  return undefined;\r\n};\r\n\r\n/**\r\n *\r\n * @param {String} msg main log message\r\n * @param {Array} args optional log arguments\r\n * @param {function} consoleLog console logging function\r\n */\r\nconst formatLogs = (msg, args, consoleLog) => {\r\n  let tags;\r\n  // extract tags\r\n  [args, tags] = extractTags(args);\r\n\r\n  // merge args\r\n  if (args.length) {\r\n    args = mergeArgs(args);\r\n  }\r\n\r\n  // Format tags\r\n  const formattedTags = tags.map(tag => `[${tag}]`).join(\"\");\r\n  // timestamp\r\n  const time = new Date().toLocaleTimeString(\"en\", { hour12: false });\r\n  // Log message\r\n  const formattedMsg = `${time} ${formattedTags} ${msg}`;\r\n\r\n  // Console logging\r\n  if (args && Object.keys(args).length > 0) {\r\n    consoleLog(formattedMsg, args);\r\n  } else {\r\n    consoleLog(formattedMsg);\r\n  }\r\n};\r\n\r\n/**\r\n * Logging class. To be filled by appropriate logging methods.\r\n *\r\n * Inspired from [how to use `debug` library](https://levelup.gitconnected.com/step-up-your-console-messaging-game-in-your-react-app-42eee17659ec)\r\n *\r\n * In typescript, `?:` means the parameter cannot be null.\r\n */\r\nconst Log = {\r\n  debug: (msg, ...args) => {\r\n    formatLogs(msg, args, console.debug);\r\n  },\r\n\r\n  info: (msg, ...args) => {\r\n    formatLogs(msg, args, console.info);\r\n  },\r\n\r\n  warn: (msg, ...args) => {\r\n    formatLogs(msg, args, console.warn);\r\n  },\r\n\r\n  error: (msg, ...args) => {\r\n    formatLogs(msg, args, console.error);\r\n  }\r\n};\r\n\r\nexport default Log;\r\n","import React, { Component } from \"react\";\r\nimport history from \"../../routes/history\";\r\nimport Log from \"../log\";\r\n\r\nexport default class Callback extends Component {\r\n  componentDidMount() {\r\n    this.props.auth.handleAuthentication();\r\n    if (/access_token|id_token|error/.test(this.props.history.location.hash)) {\r\n      Log.info(\"Handling authentication\", { tags: \"Auth\" });\r\n      this.props.auth.handleAuthentication();\r\n    } else {\r\n      Log.warn(\"Nothing to handle. Redirect to /\", { tags: \"Auth\" });\r\n      history.replace(\"/\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div>Authentication in progress...</div>;\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function BlankComponent(props) {\r\n  return <div>Going to login...</div>;\r\n}\r\n","import React from \"react\";\r\nimport ToLoginComponent from \"./ToLoginComponent\";\r\nimport { SAVED_URL } from \".\";\r\nimport history from \"../../routes/history\";\r\nimport auth from \"./\";\r\nimport Log from \"../log\";\r\n\r\nconst secured = (props, SecuredComponent, optionalProps) => {\r\n  // Trigger login\r\n  if (!auth.isAuthenticated()) {\r\n    let requestedUrl = history.location.pathname\r\n      .concat(history.location.hash)\r\n      .concat(history.location.search);\r\n    Log.info(`saving URL for login: ${requestedUrl}`, { tags: \"Auth\" });\r\n    localStorage.setItem(SAVED_URL, requestedUrl);\r\n    auth.login();\r\n    return <ToLoginComponent />;\r\n  }\r\n  // return the component\r\n  else {\r\n    let mergedProps = Object.assign({}, props, optionalProps);\r\n    return <SecuredComponent {...mergedProps} />;\r\n  }\r\n};\r\n\r\nexport default secured;\r\n","const base_url =\r\n  process.env.BASE_URL || \"https://al-un.github.io/learnzone-react\";\r\n\r\nexport const AUTH0_CONFIG =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? {\r\n        domain: \"al-un-dev.eu.auth0.com\",\r\n        clientID: \"LcFOtvd8rXXxeC9XFnAYD3Ysypq2tpRE\",\r\n        redirectUri: \"http://localhost:3000/callback\",\r\n        logoutUrl: \"http://localhost:3000\",\r\n        audience: \"https://rails.learnzone.com\"\r\n        // audience: \"https://node.learnzone.com\"\r\n      }\r\n    : {\r\n        domain: \"al-un.eu.auth0.com\",\r\n        clientID: \"0nwDEdqBp76l2tr19nGI48AxOuF0VdCP\",\r\n        redirectUri: `${base_url}/callback`,\r\n        logoutUrl: `${base_url}/`,\r\n        audience: \"https://rails.learnzone.com\"\r\n      };\r\n","import React from \"react\";\r\n\r\n/**\r\n *\r\n * @param {*} WrappedComponent\r\n */\r\nfunction entitiesHandler(WrappedComponent) {\r\n  return class extends React.Component {\r\n    componentDidMount() {\r\n      this.props.load();\r\n    }\r\n\r\n    render() {\r\n      return this.props.entities ? (\r\n        <div>\r\n          <WrappedComponent\r\n            entities={this.props.entities}\r\n            deleteEntity={id => this.props.delete(id)}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div>Loading list...</div>\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport default entitiesHandler;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * Create button can:\r\n * - redirect to `new` URL\r\n * - TODO...\r\n */\r\nconst CreateButton = props => {\r\n  // URL redirection\r\n  if (props.url) {\r\n    return (\r\n      <Link to={props.url} className=\"btn btn-outline-primary\">\r\n        <span className=\"fas fa-plus\" />\r\n        <span>{props.value}</span>\r\n      </Link>\r\n    );\r\n  }\r\n  // TODO: other create buttons\r\n  else {\r\n    return <div />;\r\n  }\r\n};\r\n\r\nCreateButton.propTypes = {\r\n  url: PropTypes.string,\r\n  value: PropTypes.string\r\n};\r\n\r\nCreateButton.defaultProps = {\r\n  value: \"Create\"\r\n};\r\n\r\n/**\r\n * Delete button can only delete via an Ajax request\r\n */\r\nconst DeleteButton = props => (\r\n  <button className=\"btn btn-danger btn-sm\" onClick={props.deleteFunc}>\r\n    <span className=\"fas fa-trash\" />\r\n    <span>Delete</span>\r\n  </button>\r\n);\r\n\r\nDeleteButton.propTypes = {\r\n  deleteFunc: PropTypes.func.isRequired\r\n};\r\n\r\nexport { CreateButton, DeleteButton };\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport auth from \"../../services/auth\";\r\nimport PropTypes from \"prop-types\";\r\nimport { DeleteButton } from \"./Buttons\";\r\n\r\n/**\r\n * Rendering a line of *edit* and *delete* buttons if the current user is\r\n *  authenticated\r\n */\r\nexport default class EditDeleteButtonsRow extends React.Component {\r\n  /**\r\n   * Ensure confirmation before deletion. Confirmation message can be customized\r\n   * via the `deleteMsg` props\r\n   */\r\n  deleteFunc = () => {\r\n    let confirmMsg = this.props.deleteMsg || \"Confirm deletion?\";\r\n    let confirmDel = window.confirm(confirmMsg);\r\n    if (confirmDel) {\r\n      this.props.deleteFunc();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Rendering with a bootstrap flex\r\n   */\r\n  render() {\r\n    return auth.isAuthenticated() ? (\r\n      // allowed to edit/delete\r\n      <div className=\"d-flex justify-content-between\">\r\n        <Link to={this.props.editPath} className=\"btn btn-sm btn-info\">\r\n          <span className=\"fas fa-edit\" />\r\n          Edit\r\n        </Link>\r\n\r\n        <DeleteButton deleteFunc={this.deleteFunc} />\r\n      </div>\r\n    ) : (\r\n      // TODO: how to display it?\r\n      <div className=\"unauthorized\" />\r\n    );\r\n  }\r\n}\r\n\r\nEditDeleteButtonsRow.propTypes = {\r\n  editPath: PropTypes.string.isRequired,\r\n  deleteFunc: PropTypes.func.isRequired,\r\n  deleteMsg: PropTypes.string\r\n};\r\n","import PropTypes from \"prop-types\";\r\n\r\n/**\r\n * API root path\r\n */\r\nconst CATALOG_API_PATH = \"/catalogs\";\r\n/**\r\n * UI root path\r\n */\r\nconst CATALOG_PATH = \"/catalogs\";\r\n/**\r\n * Catalog definition\r\n */\r\nconst CATALOG_ATTRIBUTES = {\r\n  id: PropTypes.number,\r\n  code: PropTypes.string,\r\n  name: PropTypes.string,\r\n  description: PropTypes.string,\r\n  user_id: PropTypes.number\r\n};\r\n\r\nconst generateNewCatalog = () => ({\r\n  code: \"\",\r\n  name: \"\"\r\n});\r\n\r\nexport {\r\n  CATALOG_API_PATH,\r\n  CATALOG_PATH,\r\n  CATALOG_ATTRIBUTES,\r\n  generateNewCatalog\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport EditDeleteButtonsRow from \"../utils/EditDeleteButtonsRow\";\r\nimport auth from \"../../services/auth\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CreateButton } from \"../utils/Buttons\";\r\nimport { CATALOG_PATH } from \"./Catalog\";\r\n\r\n/**\r\n * Catalogs list\r\n * @param {*} props\r\n */\r\nfunction CatalogList(props) {\r\n  return (\r\n    <div className=\"container-fluid catalogs-list\">\r\n      <h3>Catalogs</h3>\r\n      <div className=\"row\">\r\n        {props.entities.map((catalog, index) => (\r\n          <div key={catalog.id} className=\"col-12 col-md-3 mt-3\">\r\n            <div className=\"card\">\r\n              <Link to={`${CATALOG_PATH}/${catalog.id}`}>\r\n                <div className=\"card-header\">\r\n                  <span>\r\n                    {catalog.id}: {catalog.name}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text\">{catalog.description}</p>\r\n                  <p className=\"card-text\">\r\n                    {catalog.publications_count} article(s)\r\n                  </p>\r\n                </div>\r\n              </Link>\r\n\r\n              <div className=\"card-footer\">\r\n                <span>Owner: {catalog.user.auth0_id}</span>\r\n                <EditDeleteButtonsRow\r\n                  editPath={`${CATALOG_PATH}/${catalog.id}/edit`}\r\n                  deleteFunc={() => props.deleteEntity(catalog.id)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {auth.isAuthenticated() && (\r\n        <div className=\"row\">\r\n          <CreateButton url={`${CATALOG_PATH}/new`} value=\"Create a catalog\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nCatalogList.propTypes = {\r\n  entities: PropTypes.array.isRequired,\r\n  deleteEntity: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CatalogList;\r\n","import Log from \"../../services/log\";\r\nimport { generateNewCatalog } from \"../../components/products/Catalog\";\r\n\r\n// Actions\r\nconst LOAD = \"learnzone/catalog/LOAD\";\r\nconst LOADED = \"learnzone/catalog/LOADED\";\r\nconst CLEAR = \"learnzone/catalog/CLEAR\";\r\nconst LIST_LOAD = \"learnzone/catalog/LIST_LOAD\";\r\nconst LIST_LOADED = \"learnzone/catalog/LIST_LOADED\";\r\nconst NEW = \"learnzone/catalog/NEW\";\r\nconst CREATE = \"learnzone/catalog/CREATE\";\r\nconst CREATED = \"learnzone/catalog/CREATED\";\r\nconst UPDATE = \"learnzone/catalog/UPDATE\";\r\nconst UPDATED = \"learnzone/catalog/UPDATED\";\r\nconst DELETE = \"learnzone/catalog/DELETE\";\r\nconst DELETED = \"learnzone/catalog/DELETED\";\r\n\r\n// Reducers\r\nconst reducer = (state = {}, action = {}) => {\r\n  switch (action.type) {\r\n    // Catalogs are loaded\r\n    case LIST_LOADED:\r\n      const catalogs = action.payload;\r\n      Log.info(`Loaded ${catalogs.length} catalog(s)`, {\r\n        tags: [\"Redux\", \"Catalog\"]\r\n      });\r\n      return { ...state, list: catalogs };\r\n\r\n    // entity is loaded\r\n    case LOADED:\r\n      Log.info(`Loaded #${action.payload.id}`, { tags: [\"Redux\", \"Catalog\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Clear current entity\r\n    case CLEAR:\r\n      return { ...state, entity: undefined };\r\n\r\n    // new non-saved entity\r\n    case NEW:\r\n      return { ...state, entity: generateNewCatalog() };\r\n\r\n    // Entity is created\r\n    case CREATED:\r\n      Log.info(`Created`, action.payload, { tags: [\"Redux\", \"Catalog\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Entity is updated\r\n    case UPDATED:\r\n      Log.info(`Updated`, action.payload, { tags: [\"Redux\", \"Catalog\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Entity is deleted\r\n    case DELETED:\r\n      const id = action.payload;\r\n      Log.info(`Deleted catalog#${id}`, { tags: [\"Redux\", \"Catalog\"] });\r\n      const updatedList = state.list.filter(catalog => catalog.id !== id);\r\n      return {\r\n        ...state,\r\n        list: updatedList\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default reducer;\r\n\r\n// Actions creator\r\nconst loadCatalogs = () => ({ type: LIST_LOAD });\r\nconst loadCatalog = id => ({ type: LOAD, payload: id });\r\nconst clearCatalog = () => ({ type: CLEAR });\r\nconst newCatalog = () => ({ type: NEW });\r\nconst createCatalog = (catalog, meta) => ({\r\n  type: CREATE,\r\n  payload: catalog,\r\n  meta\r\n});\r\nconst updateCatalog = (catalog, meta) => ({\r\n  type: UPDATE,\r\n  payload: catalog,\r\n  meta\r\n});\r\nconst deleteCatalog = (id, meta) => ({ type: DELETE, payload: id, meta });\r\n\r\nexport {\r\n  LOAD,\r\n  LOADED,\r\n  NEW,\r\n  CLEAR,\r\n  LIST_LOAD,\r\n  LIST_LOADED,\r\n  CREATE,\r\n  CREATED,\r\n  UPDATE,\r\n  UPDATED,\r\n  DELETE,\r\n  DELETED,\r\n  loadCatalogs,\r\n  loadCatalog,\r\n  clearCatalog,\r\n  newCatalog,\r\n  createCatalog,\r\n  updateCatalog,\r\n  deleteCatalog\r\n};\r\n","// -------------------- Import\r\n// React\r\nimport { connect } from \"react-redux\";\r\n// HOC\r\nimport entitiesHandler from \"../hoc/entitiesHandler\";\r\n// Products\r\nimport CatalogList from \"../../components/products/CatalogList\";\r\nimport { loadCatalogs, deleteCatalog } from \"../../redux/products/catalog\";\r\n\r\n// -------------------- Redux def\r\nconst mapStateToProps = state => ({ entities: state.catalogs.list });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    load: () => dispatch(loadCatalogs()),\r\n    delete: id => dispatch(deleteCatalog(id))\r\n  };\r\n};\r\n\r\nconst CatalogsContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(entitiesHandler(CatalogList));\r\n\r\n// -------------------- Export\r\nexport default CatalogsContainer;\r\n","const CRUD = {\r\n  // \"new\" prepares a \"create\" operation\r\n  NEW: \"new\",\r\n  READ: \"read\",\r\n  // \"edit\" prepares an \"update\" operation\r\n  EDIT: \"edit\"\r\n};\r\n\r\nexport default CRUD;\r\n","import React from \"react\";\r\nimport CRUD from \"../../api/crud\";\r\nimport Log from \"../../services/log\";\r\n\r\n/**\r\n *\r\n * @param {Component} FormComponent edition mode\r\n * @param {Component} DetailComponent display mode\r\n */\r\nfunction entityHandler(FormComponent, DetailComponent) {\r\n  return class extends React.Component {\r\n    componentDidMount() {\r\n      let id = this.props.match.params.id;\r\n      Log.info(`Mounting entityHandler: ${id}`);\r\n      // hard coded \"new\" id\r\n      if (id && id !== CRUD.NEW) {\r\n        this.props.load(id);\r\n      } else {\r\n        this.props.new();\r\n      }\r\n    }\r\n\r\n    componentDidUpdate(){\r\n      Log.info(`Updating entityHandler`);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n      this.props.unmount();\r\n    }\r\n\r\n    /**\r\n     * Submit the form from the FormComponent. The submitEntityFn handles\r\n     * creation or update distinction\r\n     */\r\n    saveEntity = entity => {\r\n      // Log.debug(`submitting entity ${JSON.stringify(this.state)}`);\r\n\r\n      // Distinguish create or update\r\n      // Cannot rely on props.crud as a new entitiy might be edited again\r\n      if (entity.id) {\r\n        this.props.update(entity);\r\n      }\r\n      // no id: creating new entity\r\n      else {\r\n        this.props.create(entity);\r\n      }\r\n    };\r\n\r\n    render() {\r\n      // render detail or form only if entity is loaded\r\n      if (this.props.entity) {\r\n        return CRUD.NEW === this.props.crud || CRUD.EDIT === this.props.crud ? (\r\n          // rendering new or edit form\r\n          <FormComponent\r\n            entity={this.props.entity}\r\n            saveEntity={entity => this.saveEntity(entity)}\r\n            handleValueChange={this.handleValueChange}\r\n          />\r\n        ) : (\r\n          // rendering entity details\r\n          <DetailComponent\r\n            entity={this.props.entity}\r\n            deleteById={id => this.props.deleteById(id)}\r\n          />\r\n        );\r\n      }\r\n      // Hold on!\r\n      else {\r\n        return <div>Loading entity...</div>;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport default entityHandler;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst IdHiddenInput = props => {\r\n  return props.id ? <input type=\"hidden\" name=\"id\" value={props.id} /> : \"\";\r\n};\r\n\r\nIdHiddenInput.propsType = {\r\n  id: PropTypes.number\r\n};\r\n\r\nexport { IdHiddenInput };\r\n","import React from \"react\";\r\nimport { IdHiddenInput } from \"../utils/Inputs\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CATALOG_ATTRIBUTES } from \"./Catalog\";\r\n\r\n/**\r\n * Catalog form\r\n * @param {*} props\r\n */\r\nclass CatalogForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      entity: this.props.entity\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update the local state whenever a input is modified\r\n   */\r\n  handleValueChange = event => {\r\n    // Log.debug(`New value of ${event.target.name} is ${event.target.value}`);\r\n    this.setState({\r\n      entity: {\r\n        ...this.state.entity,\r\n        [event.target.name]: event.target.value\r\n      }\r\n    });\r\n    // Log.debug(`updating entity ${JSON.stringify(this.state)}`);\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.saveEntity(this.state.entity);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <form onSubmit={this.handleFormSubmit}>\r\n          <IdHiddenInput id={this.state.entity.id} />\r\n\r\n          <div className=\"form-group\">\r\n            <input\r\n              className=\"col col-md-2\"\r\n              type=\"text\"\r\n              name=\"code\"\r\n              required={true}\r\n              placeholder=\"Code\"\r\n              value={this.state.entity.code}\r\n              onChange={this.handleValueChange}\r\n            />\r\n            <input\r\n              className=\"col col-md-10\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              required={true}\r\n              placeholder=\"Name\"\r\n              value={this.state.entity.name}\r\n              onChange={this.handleValueChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <textarea\r\n              className=\"w-100\"\r\n              name=\"description\"\r\n              placeholder=\"Description\"\r\n              value={this.state.entity.description || undefined}\r\n              onChange={this.handleValueChange}\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary\">\r\n            Save\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogForm.propTypes = {\r\n  entity: PropTypes.shape(CATALOG_ATTRIBUTES).isRequired,\r\n  saveEntity: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CatalogForm;\r\n","import { ACCESS_TOKEN } from \"../services/auth\";\r\nimport Log from \"../services/log\";\r\n\r\nconst API_URL =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? \"http://localhost:8000\"\r\n    : \"https://learnzone-rails.herokuapp.com\";\r\nconst HEADERS = {\r\n  Accept: \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n  Authorization: `Bearer ${localStorage.getItem(ACCESS_TOKEN)}`\r\n};\r\n\r\n/**\r\n * Uber API call method\r\n * @param {*} method call method\r\n * @param {*} url called URL\r\n * @param {*} body optional body to send. Object format is JSONised\r\n */\r\nconst call_api = (method, url, body) => {\r\n  // Hey!\r\n  Log.debug(`${method} ${API_URL}${url} request`, body || {}, \"API\");\r\n\r\n  // Options building, special case for GET\r\n  const options = Object.assign(\r\n    { headers: HEADERS },\r\n    method !== \"GET\" ? { method: method } : null,\r\n    body ? { body: JSON.stringify(body) } : null\r\n  );\r\n  Log.debug(`${method} ${API_URL}${url} options`, options, \"API\");\r\n\r\n  // return promise\r\n  return fetch(`${API_URL}${url}`, options)\r\n    .then(resp => {\r\n      Log.debug(`${method} ${API_URL}${url} response ${resp.status}`, \"API\");\r\n      return resp;\r\n    })\r\n    .then(response => response.json())\r\n    .catch(err => Log.error(`Error ${err}`, err, \"API\"));\r\n  // .catch(err => console.error(`API Exception ${JSON.stringify(err)}`, err))\r\n};\r\n\r\nconst API = {\r\n  get: url => call_api(\"GET\", url),\r\n  post: (url, body) => call_api(\"POST\", url, body),\r\n  patch: (url, body) => call_api(\"PATCH\", url, body),\r\n  put: (url, body) => call_api(\"PUT\", url, body),\r\n  delete: (url, body) => call_api(\"DELETE\", url, body)\r\n};\r\nexport default API;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport auth from \"../../services/auth\";\r\nimport API from \"../../api\";\r\nimport { DeleteButton } from \"../utils/Buttons\";\r\nimport Log from \"../../services/log\";\r\n\r\n/**\r\n * Listing article publications regardless from article or from catalog\r\n */\r\nclass ArticlePublications extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3>Publications</h3>\r\n        <ul id=\"article_publications\" className=\"list-group\">\r\n          {this.props.list.map(publication => (\r\n            <li\r\n              key={publication.id}\r\n              className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n              <span>\r\n                [{publication.id}] {publication.catalog.name} -{\" \"}\r\n                {publication.article.name}\r\n              </span>\r\n\r\n              <span className=\"badge\">\r\n                {auth.isAuthenticated() && (\r\n                  <DeleteButton\r\n                    deleteFunc={() => this.props.handleDeletion(publication.id)}\r\n                  />\r\n                )}\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Search a product (article or catalog) to add to its counterpart (article for\r\n * catalog and catalog for article)\r\n * @param {*} props\r\n */\r\nconst SearchProductForm = props => (\r\n  <div>\r\n    <h3>Search {props.entityName} to add</h3>\r\n    <div>\r\n      <span>Search {props.entityName} </span>\r\n      <input\r\n        type=\"text\"\r\n        name=\"search_name\"\r\n        value={props.searchName}\r\n        onChange={props.handleSearchNameChange}\r\n      />\r\n      <button type=\"button\" className=\"btn btn-primary\" onClick={props.search}>\r\n        Search\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nSearchProductForm.propTypes = {\r\n  entityName: PropTypes.string.isRequired,\r\n  searchName: PropTypes.string.isRequired,\r\n  handleSearchNameChange: PropTypes.func.isRequired,\r\n  search: PropTypes.func.isRequired\r\n};\r\n\r\n/**\r\n * Display searched results with button to add as a publication\r\n * @param {*} props\r\n */\r\nconst SearchedProducts = props => (\r\n  <ul className=\"list-group\">\r\n    {props.searchedList.map(entity => (\r\n      <li\r\n        key={entity.id}\r\n        className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n        <span>{entity.name}</span>\r\n        <span className=\"badge\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-sm\"\r\n            onClick={() => props.createPublication(entity.id)}>\r\n            <span className=\"fas fa-plus\" />\r\n            <span>Add</span>\r\n          </button>\r\n        </span>\r\n      </li>\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nSearchedProducts.propTypes = {\r\n  searchedList: PropTypes.array.isRequired,\r\n  createPublication: PropTypes.func.isRequired\r\n};\r\n\r\n/**\r\n * Handle article publications:\r\n * - list\r\n * - search product to generate publication\r\n * - delete existing publications\r\n */\r\nexport default class ArticlePublicationsManager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      publications: this.props.publications || [],\r\n      searchName: \"\",\r\n      searchResults: []\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creating a publication\r\n   */\r\n  createPublication = productId => {\r\n    const publication = this.props.buildPublication(productId);\r\n\r\n    Log.info(`Creating publication ${JSON.stringify(publication)}`, {\r\n      tags: \"ArticlePublication\"\r\n    });\r\n\r\n    return API.post(`/article_publications/`, publication).then(data =>\r\n      this.setState({ publications: this.state.publications.concat(data) })\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Deleting a publication\r\n   */\r\n  deletePublication = id => {\r\n    Log.info(`deleting publication#${id}`);\r\n\r\n    API.delete(`/article_publications/${id}`).then(data => {\r\n      Log.debug(\r\n        `Deletion response: ${JSON.stringify(data)}`,\r\n        \"ArticlePublication\"\r\n      );\r\n      if (data.success) {\r\n        this.setState(prevState => ({\r\n          publications: prevState.publications.filter(publ => publ.id !== id)\r\n        }));\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Searching new name\r\n   */\r\n  handleSearchNameChange = event => {\r\n    this.setState({ searchName: event.target.value });\r\n  };\r\n\r\n  /**\r\n   * Search products\r\n   */\r\n  search = () => {\r\n    const name = this.state.searchName;\r\n    const searchUrl = this.props.searchUrl(name);\r\n    API.get(searchUrl).then(data => this.setState({ searchResults: data }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ArticlePublications\r\n          list={this.state.publications}\r\n          handleDeletion={this.deletePublication}\r\n        />\r\n\r\n        <SearchProductForm\r\n          entityName={this.props.entityName}\r\n          searchName={this.state.searchName}\r\n          handleSearchNameChange={this.handleSearchNameChange}\r\n          search={this.search}\r\n        />\r\n\r\n        <SearchedProducts\r\n          searchedList={this.state.searchResults}\r\n          createPublication={productId => this.createPublication(productId)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nArticlePublicationsManager.propTypes = {\r\n  publications: PropTypes.array,\r\n  searchUrl: PropTypes.func.isRequired,\r\n  entityName: PropTypes.string.isRequired,\r\n  buildPublication: PropTypes.func.isRequired\r\n};\r\n","import PropTypes from \"prop-types\";\r\n\r\n/**\r\n * API root path\r\n */\r\nconst ARTICLE_API_PATH = \"/articles\";\r\n/**\r\n * UI root path\r\n */\r\nconst ARTICLE_PATH = \"/articles\";\r\n/**\r\n * Article definition\r\n */\r\nconst ARTICLE_ATTRIBUTES = {\r\n  id: PropTypes.number,\r\n  name: PropTypes.string,\r\n  description: PropTypes.string,\r\n  user_id: PropTypes.number\r\n};\r\n\r\nconst generateNewArticle = () => ({\r\n  name: \"\"\r\n});\r\n\r\nexport {\r\n  ARTICLE_API_PATH,\r\n  ARTICLE_PATH,\r\n  ARTICLE_ATTRIBUTES,\r\n  generateNewArticle\r\n};\r\n","import React from \"react\";\r\nimport EditDeleteButtonsRow from \"../utils/EditDeleteButtonsRow\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CATALOG_ATTRIBUTES, CATALOG_PATH } from \"./Catalog\";\r\nimport ArticlePublicationsManager from \"./ArticlePublication\";\r\nimport { ARTICLE_API_PATH } from \"./Article\";\r\n\r\n/**\r\n * Catalog details\r\n * @param {*} props\r\n */\r\nexport default class CatalogDetail extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"card w-100\">\r\n          <div className=\"card-header\">\r\n            <h3>\r\n              Catalog#{this.props.entity.id} [{this.props.entity.code}]{\" \"}\r\n              {this.props.entity.name}\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            <span className=\"card-text\">{this.props.entity.description}</span>\r\n          </div>\r\n\r\n          <div className=\"card-footer\">\r\n            <EditDeleteButtonsRow\r\n              editPath={`${CATALOG_PATH}/${this.props.entity.id}/edit`}\r\n              deleteFunc={() => this.props.deleteById(this.props.entity.id)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <ArticlePublicationsManager\r\n          publications={this.props.entity.article_publications}\r\n          searchUrl={name => `${ARTICLE_API_PATH}/search?name=${name}`}\r\n          entityName=\"Article\"\r\n          buildPublication={articleId => {\r\n            return { catalog_id: this.props.entity.id, article_id: articleId };\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogDetail.propTypes = {\r\n  entity: PropTypes.shape(CATALOG_ATTRIBUTES).isRequired,\r\n  deleteById: PropTypes.func.isRequired\r\n};\r\n","// -------------------- Import\r\n// React\r\nimport { connect } from \"react-redux\";\r\n// HOC\r\nimport entityHandler from \"../hoc/entityHandler\";\r\n// Products\r\nimport CatalogForm from \"../../components/products/CatalogForm\";\r\nimport CatalogDetail from \"../../components/products/CatalogDetail\";\r\nimport {\r\n  loadCatalog,\r\n  newCatalog,\r\n  createCatalog,\r\n  updateCatalog,\r\n  deleteCatalog,\r\n  clearCatalog\r\n} from \"../../redux/products/catalog\";\r\nimport history from \"../../routes/history\";\r\nimport { CATALOG_PATH } from \"../../components/products/Catalog\";\r\n\r\nconst mapStateToProps = state => ({ entity: state.catalogs.entity });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    load: id => dispatch(loadCatalog(id)),\r\n    new: () => dispatch(newCatalog()),\r\n    create: catalog =>\r\n      dispatch(\r\n        createCatalog(catalog, {\r\n          postProcessing: catalog =>\r\n            history.push(`${CATALOG_PATH}/${catalog.id}`)\r\n        })\r\n      ),\r\n    update: catalog =>\r\n      dispatch(\r\n        updateCatalog(catalog, {\r\n          postProcessing: catalog =>\r\n            history.push(`${CATALOG_PATH}/${catalog.id}`)\r\n        })\r\n      ),\r\n    deleteById: id =>\r\n      dispatch(\r\n        deleteCatalog(id, {\r\n          postProcessing: () => history.push(`${CATALOG_PATH}`)\r\n        })\r\n      ),\r\n    unmount: () => dispatch(clearCatalog())\r\n  };\r\n};\r\n\r\nconst CatalogContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(entityHandler(CatalogForm, CatalogDetail));\r\n\r\nexport default CatalogContainer;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport EditDeleteButtonsRow from \"../utils/EditDeleteButtonsRow\";\r\nimport auth from \"../../services/auth\";\r\nimport PropTypes from \"prop-types\";\r\nimport { ARTICLE_PATH } from \"./Article\";\r\n\r\n/**\r\n * Articles list\r\n * @param {*} props\r\n */\r\nfunction ArticleList(props) {\r\n  return (\r\n    <div className=\"container-fluid articles-list\">\r\n      <h3>Articles</h3>\r\n      <div className=\"row\">\r\n        {props.entities.map((article, index) => (\r\n          <div key={article.id} className=\"col-12 col-md-3 mt-3\">\r\n            <div className=\"card\">\r\n              <Link to={`${ARTICLE_PATH}/${article.id}`}>\r\n                <div className=\"card-header\">\r\n                  <span>\r\n                    {article.id}: {article.name}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"card-body\">\r\n                  <p className=\"card-text\">{article.description}</p>\r\n                  <p className=\"card-text\">\r\n                    {article.publications_count} catalog(s)\r\n                  </p>\r\n                </div>\r\n              </Link>\r\n\r\n              <div className=\"card-footer\">\r\n                <span>Owner: {article.user.auth0_id}</span>\r\n                <EditDeleteButtonsRow\r\n                  editPath={`${ARTICLE_PATH}/${article.id}/edit`}\r\n                  deleteFunc={() => props.deleteEntity(article.id)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {auth.isAuthenticated && (\r\n        <div className=\"row\">\r\n          <Link to={`${ARTICLE_PATH}/new`} className=\"btn btn-outline-primary\">\r\n            <span className=\"fas fa-plus\" />\r\n            <span>Create an article</span>\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nArticleList.propTypes = {\r\n  entities: PropTypes.array.isRequired,\r\n  deleteEntity: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ArticleList;\r\n","import Log from \"../../services/log\";\r\nimport { generateNewArticle } from \"../../components/products/Article\";\r\n\r\n// Actions\r\nconst LOAD = \"learnzone/article/LOAD\";\r\nconst LOADED = \"learnzone/article/LOADED\";\r\nconst LIST_LOAD = \"learnzone/article/LIST_LOAD\";\r\nconst LIST_LOADED = \"learnzone/article/LIST_LOADED\";\r\nconst CLEAR = \"learnzone/article/CLEAR\";\r\nconst NEW = \"learnzone/article/NEW\";\r\nconst CREATE = \"learnzone/article/CREATE\";\r\nconst CREATED = \"learnzone/article/CREATED\";\r\nconst UPDATE = \"learnzone/article/UPDATE\";\r\nconst UPDATED = \"learnzone/article/UPDATED\";\r\nconst DELETE = \"learnzone/article/DELETE\";\r\nconst DELETED = \"learnzone/article/DELETED\";\r\n\r\n// Reducers\r\nconst reducer = (state = {}, action = {}) => {\r\n  switch (action.type) {\r\n    // Requested entity list is loaded\r\n    case LIST_LOADED:\r\n      const articles = action.payload;\r\n      Log.info(`Loaded ${articles.length} articles(s)`, {\r\n        tags: [\"Redux\", \"Article\"]\r\n      });\r\n      return { ...state, list: articles };\r\n\r\n    // entity is loaded\r\n    case LOADED:\r\n      Log.info(`Loaded #${action.payload.id}`, { tags: [\"Redux\", \"Article\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Clear current entity\r\n    case CLEAR:\r\n      return { ...state, entity: undefined };\r\n\r\n    // new non-saved entity\r\n    case NEW:\r\n      return { ...state, entity: generateNewArticle() };\r\n\r\n    // Entity is created\r\n    case CREATED:\r\n      Log.info(`Created`, action.payload, { tags: [\"Redux\", \"Article\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Entity is updated\r\n    case UPDATED:\r\n      Log.info(`Updated`, action.payload, { tags: [\"Redux\", \"Catalog\"] });\r\n      return { ...state, entity: action.payload };\r\n\r\n    // Entity is deleted\r\n    case DELETED:\r\n      const id = action.payload;\r\n      Log.info(`Deleted article#${id}`, { tags: [\"Redux\", \"Article\"] });\r\n      const updatedList = state.list.filter(article => article.id !== id);\r\n      return {\r\n        ...state,\r\n        list: updatedList\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default reducer;\r\n\r\n// Action creator\r\nconst loadArticles = () => ({ type: LIST_LOAD });\r\nconst loadArticle = id => ({ type: LOAD, payload: id });\r\nconst clearArticle = () => ({ type: CLEAR });\r\nconst newArticle = () => ({ type: NEW });\r\nconst createArticle = (article, meta) => ({\r\n  type: CREATE,\r\n  payload: article,\r\n  meta\r\n});\r\nconst updateArticle = (article, meta) => ({\r\n  type: UPDATE,\r\n  payload: article,\r\n  meta\r\n});\r\nconst deleteArticle = (id, meta) => ({ type: DELETE, payload: id, meta });\r\n\r\nexport {\r\n  LOAD,\r\n  LOADED,\r\n  LIST_LOAD,\r\n  LIST_LOADED,\r\n  CLEAR,\r\n  NEW,\r\n  CREATE,\r\n  CREATED,\r\n  UPDATE,\r\n  UPDATED,\r\n  DELETE,\r\n  DELETED,\r\n  loadArticles,\r\n  loadArticle,\r\n  clearArticle,\r\n  newArticle,\r\n  createArticle,\r\n  updateArticle,\r\n  deleteArticle\r\n};\r\n","// -------------------- Import\r\n// React\r\nimport { connect } from \"react-redux\";\r\n// HOC\r\nimport entitiesHandler from \"../hoc/entitiesHandler\";\r\n// Products\r\nimport ArticleList from \"../../components/products/ArticleList\";\r\nimport { loadArticles, deleteArticle } from \"../../redux/products/article\";\r\n\r\n// -------------------- Redux def\r\nconst mapStateToProps = state => ({ entities: state.articles.list });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    load: () => dispatch(loadArticles()),\r\n    delete: id => dispatch(deleteArticle(id))\r\n  };\r\n};\r\n\r\nconst ArticlesContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(entitiesHandler(ArticleList));\r\n\r\n// -------------------- Export\r\nexport default ArticlesContainer;\r\n","import React from \"react\";\r\nimport { IdHiddenInput } from \"../utils/Inputs\";\r\nimport PropTypes from \"prop-types\";\r\nimport { ARTICLE_ATTRIBUTES } from \"./Article\";\r\n\r\n/**\r\n * Article form\r\n * @param {*} props\r\n */\r\nclass ArticleForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      entity: this.props.entity\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update the local state whenever a input is modified\r\n   */\r\n  handleValueChange = event => {\r\n    // Log.debug(`New value of ${event.target.name} is ${event.target.value}`);\r\n    this.setState({\r\n      entity: {\r\n        ...this.state.entity,\r\n        [event.target.name]: event.target.value\r\n      }\r\n    });\r\n    // Log.debug(`updating entity ${JSON.stringify(this.state)}`);\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.saveEntity(this.state.entity);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <form onSubmit={this.handleFormSubmit}>\r\n          <IdHiddenInput id={this.state.entity.id} />\r\n\r\n          <div className=\"form-group\">\r\n            <input\r\n              className=\"w-100\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              placeholder=\"Name\"\r\n              required={true}\r\n              value={this.state.entity.name}\r\n              onChange={this.handleValueChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <textarea\r\n              className=\"w-100\"\r\n              name=\"description\"\r\n              placeholder=\"Description\"\r\n              value={this.state.entity.description || undefined}\r\n              onChange={this.handleValueChange}\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-success btn-lg\">\r\n            Save\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nArticleForm.propTypes = {\r\n  entity: PropTypes.shape(ARTICLE_ATTRIBUTES).isRequired,\r\n  saveEntity: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ArticleForm;\r\n","import React from \"react\";\r\nimport EditDeleteButtonsRow from \"../utils/EditDeleteButtonsRow\";\r\nimport PropTypes from \"prop-types\";\r\nimport { ARTICLE_ATTRIBUTES, ARTICLE_PATH } from \"./Article\";\r\nimport ArticlePublicationsManager from \"./ArticlePublication\";\r\nimport { CATALOG_API_PATH } from \"./Catalog\";\r\n\r\n/**\r\n * Article details\r\n * @param {*} props\r\n */\r\nexport default class ArticleDetail extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"card w-100\">\r\n          <div className=\"card-header\">\r\n            <h3>\r\n              Article#{this.props.entity.id} {this.props.entity.name}\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"card-body\">\r\n            <span className=\"card-text\">{this.props.entity.description}</span>\r\n          </div>\r\n\r\n          <div className=\"card-footer\">\r\n            <EditDeleteButtonsRow\r\n              editPath={`${ARTICLE_PATH}/${this.props.entity.id}/edit`}\r\n              deleteFunc={() => this.props.deleteById(this.props.entity.id)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <ArticlePublicationsManager\r\n          publications={this.props.entity.article_publications}\r\n          searchUrl={name => `${CATALOG_API_PATH}/search?name=${name}`}\r\n          entityName=\"Catalog\"\r\n          buildPublication={catalogId => {\r\n            return { catalog_id: catalogId, article_id: this.props.entity.id };\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nArticleDetail.propTypes = {\r\n  entity: PropTypes.shape(ARTICLE_ATTRIBUTES).isRequired,\r\n  deleteById: PropTypes.func.isRequired\r\n};\r\n","// -------------------- Import\r\n// React\r\nimport { connect } from \"react-redux\";\r\n// HOC\r\nimport entityHandler from \"../hoc/entityHandler\";\r\n// Products\r\nimport ArticleForm from \"../../components/products/ArticleForm\";\r\nimport ArticleDetail from \"../../components/products/ArticleDetail\";\r\nimport {\r\n  deleteArticle,\r\n  loadArticle,\r\n  newArticle,\r\n  createArticle,\r\n  updateArticle,\r\n  clearArticle\r\n} from \"../../redux/products/article\";\r\nimport history from \"../../routes/history\";\r\nimport { ARTICLE_PATH } from \"../../components/products/Article\";\r\n\r\n// -------------------- Redux def\r\nconst mapStateToProps = state => ({ entity: state.articles.entity });\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    load: id => dispatch(loadArticle(id)),\r\n    new: () => dispatch(newArticle()),\r\n    create: article =>\r\n      dispatch(\r\n        createArticle(article, {\r\n          postProcessing: article =>\r\n            history.push(`${ARTICLE_PATH}/${article.id}`)\r\n        })\r\n      ),\r\n    update: article =>\r\n      dispatch(\r\n        updateArticle(article, {\r\n          postProcessing: article =>\r\n            history.push(`${ARTICLE_PATH}/${article.id}`)\r\n        })\r\n      ),\r\n    deleteById: id =>\r\n      dispatch(\r\n        deleteArticle(id, {\r\n          postProcessing: () => history.push(`${ARTICLE_PATH}`)\r\n        })\r\n      ),\r\n    unmount: () => dispatch(clearArticle())\r\n  };\r\n};\r\n\r\nconst ArticleContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(entityHandler(ArticleForm, ArticleDetail));\r\n\r\n// -------------------- Export\r\nexport default ArticleContainer;\r\n","import React from \"react\";\r\nimport { ACCESS_TOKEN, ID_TOKEN, EXPIRES_AT } from \"../../services/auth\";\r\n\r\n/**\r\n * Hyperlink opened in _blank target:\r\n * https://github.com/asciidoctor/asciidoctor/issues/2071\r\n */\r\nexport default class MiscInfoPage extends React.Component {\r\n  render() {\r\n    const a_token = localStorage.getItem(ACCESS_TOKEN);\r\n    const i_token = localStorage.getItem(ID_TOKEN);\r\n    const ex_date = localStorage.getItem(EXPIRES_AT);\r\n\r\n    return (\r\n      <div>\r\n        <h3>Misc info page</h3>\r\n\r\n        <div>\r\n          <h4>Access Token:</h4>\r\n          <pre className=\"full-width\">{a_token || \"none\"}</pre>\r\n          {a_token && (\r\n            <a\r\n              href={`https://jwt.io/?token=${a_token}`}\r\n              className=\"btn btn-secondary mb-3\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\">\r\n              Decrypt on jwt.io\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <h4>ID Token:</h4>\r\n          <pre className=\"full-width\">{i_token || \"none\"}</pre>\r\n          {i_token && (\r\n            <a\r\n              href={`https://jwt.io/?token=${i_token}`}\r\n              className=\"btn btn-secondary mb-3\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\">\r\n              Decrypt on jwt.io\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <h4>Expires At:</h4>\r\n          <pre className=\"full-width\">{ex_date || \"none\"}</pre>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport CatalogsContainer from \"../containers/products/CatalogsContainer\";\r\nimport CatalogContainer from \"../containers/products/CatalogContainer\";\r\nimport ArticlesContainer from \"../containers/products/ArticlesContainer\";\r\nimport ArticleContainer from \"../containers/products/ArticleContainer\";\r\nimport MiscInfoPage from \"../pages/static/MiscInfoPage\";\r\nimport CRUD from \"../api/crud\";\r\nimport { Callback } from \"../services/auth\";\r\nimport secured from \"../services/auth/Secured\";\r\nimport { CATALOG_PATH } from \"../components/products/Catalog\";\r\nimport { ARTICLE_PATH } from \"../components/products/Article\";\r\n\r\n/**\r\n * Exporting root path\r\n */\r\nexport const ROOT_PATH = \"/\";\r\n\r\n/**\r\n * https://reacttraining.com/react-router/core/api/\r\n */\r\nexport default class Routes extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={CatalogsContainer} />\r\n\r\n        <Route\r\n          exact\r\n          path=\"/callback\"\r\n          render={props => <Callback {...props} auth={this.props.auth} />}\r\n        />\r\n\r\n        <Route exact path={`${CATALOG_PATH}`} component={CatalogsContainer} />\r\n        <Route\r\n          exact\r\n          path={`${CATALOG_PATH}/new`}\r\n          render={props => secured(props, CatalogContainer, { crud: CRUD.NEW })}\r\n        />\r\n        <Route\r\n          exact\r\n          path={`${CATALOG_PATH}/:id`}\r\n          render={props => <CatalogContainer {...props} crud={CRUD.READ} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path={`${CATALOG_PATH}/:id/edit`}\r\n          render={props =>\r\n            secured(props, CatalogContainer, { crud: CRUD.EDIT })\r\n          }\r\n        />\r\n\r\n        <Route exact path={`${ARTICLE_PATH}`} component={ArticlesContainer} />\r\n        <Route\r\n          exact\r\n          path={`${ARTICLE_PATH}/new`}\r\n          render={props => secured(props, ArticleContainer, { crud: CRUD.NEW })}\r\n        />\r\n        <Route\r\n          exact\r\n          path={`${ARTICLE_PATH}/:id`}\r\n          render={props => <ArticleContainer {...props} crud={CRUD.READ} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path={`${ARTICLE_PATH}/:id/edit`}\r\n          render={props =>\r\n            secured(props, ArticleContainer, { crud: CRUD.EDIT })\r\n          }\r\n        />\r\n\r\n        <Route exact path=\"/misc-info\" component={MiscInfoPage} />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n","import auth0 from \"auth0-js\";\r\nimport history from \"../../routes/history\";\r\nimport { AUTH0_CONFIG } from \"./auth0_config\";\r\nimport { ACCESS_TOKEN, ID_TOKEN, EXPIRES_AT, SAVED_URL } from \"./\";\r\nimport { ROOT_PATH } from \"../../routes\";\r\nimport Log from \"../log\";\r\n\r\n/**\r\n * Auth0 authentication handler\r\n */\r\nexport default class Auth {\r\n  /**\r\n   * Auth0 configuration\r\n   */\r\n  auth0 = new auth0.WebAuth({\r\n    domain: AUTH0_CONFIG.domain,\r\n    clientID: AUTH0_CONFIG.clientID,\r\n    redirectUri: AUTH0_CONFIG.redirectUri,\r\n    responseType: \"token id_token\",\r\n    scope: \"openid\",\r\n    audience: AUTH0_CONFIG.audience\r\n  });\r\n\r\n  constructor() {\r\n    Log.debug(\"Contructing Auth instance\", { tags: \"Auth\" });\r\n    this.login = this.login.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n    this.handleAuthentication = this.handleAuthentication.bind(this);\r\n    this.isAuthenticated = this.isAuthenticated.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Trigger redirection to login page\r\n   */\r\n  login() {\r\n    let redirect_url = localStorage.getItem(SAVED_URL);\r\n    if (redirect_url === undefined || redirect_url === null) {\r\n      redirect_url = window.location.pathname;\r\n      localStorage.setItem(SAVED_URL, redirect_url);\r\n    }\r\n    Log.info(` Auth0 login with saving: ${redirect_url}`, {\r\n      tags: \"Authentication\"\r\n    });\r\n    this.auth0.authorize();\r\n  }\r\n\r\n  /**\r\n   * Handle a successful authentication: token and stuff\r\n   */\r\n  handleAuthentication() {\r\n    this.auth0.parseHash((err, authResult) => {\r\n      // Any error\r\n      if (err) {\r\n        Log.error(`[Authentication] Error`, err, { tags: \"Auth\" });\r\n        history.replace(ROOT_PATH);\r\n      }\r\n\r\n      // Successful authentication\r\n      else if (authResult && authResult.accessToken && authResult.idToken) {\r\n        // save tokens\r\n        this.setSession(authResult);\r\n        // redirection\r\n        let redirectUrl = localStorage.getItem(SAVED_URL) || ROOT_PATH;\r\n        Log.info(`[Authentication] success and redirect to ${redirectUrl}`, {\r\n          tags: \"Auth\"\r\n        });\r\n        localStorage.removeItem(SAVED_URL);\r\n        history.replace(redirectUrl);\r\n      }\r\n\r\n      // WTF?\r\n      else {\r\n        Log.error(`[Authentication] abnormal auth:`, authResult, {\r\n          tags: \"Auth\"\r\n        });\r\n        history.replace(ROOT_PATH);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Token and stuff from authentication handling\r\n   * @param {*} authResult\r\n   */\r\n  setSession(authResult) {\r\n    // Set the time that the Access Token will expire at\r\n    let expiresAt = JSON.stringify(\r\n      authResult.expiresIn * 1000 + new Date().getTime()\r\n    );\r\n    localStorage.setItem(ACCESS_TOKEN, authResult.accessToken);\r\n    localStorage.setItem(ID_TOKEN, authResult.idToken);\r\n    localStorage.setItem(EXPIRES_AT, expiresAt);\r\n  }\r\n\r\n  /**\r\n   * Logout process\r\n   */\r\n  logout() {\r\n    // Clear Access Token and ID Token from local storage\r\n    localStorage.removeItem(ACCESS_TOKEN);\r\n    localStorage.removeItem(ID_TOKEN);\r\n    localStorage.removeItem(EXPIRES_AT);\r\n\r\n    // fully logout from Auth0 as well:\r\n    let logoutPath = `https://${AUTH0_CONFIG.domain}/v2/logout?client_id=${\r\n      AUTH0_CONFIG.clientID\r\n    }&returnTo=${AUTH0_CONFIG.logoutUrl}`;\r\n    window.location.replace(logoutPath);\r\n  }\r\n\r\n  /**\r\n   * Check if current session is an authenticated session:\r\n   * - session is logged in\r\n   * - AND current session is not an expired one\r\n   */\r\n  isAuthenticated() {\r\n    // Check whether the current time is past the\r\n    // Access Token's expiry time\r\n    let expiresAt = JSON.parse(localStorage.getItem(EXPIRES_AT));\r\n    return new Date().getTime() < expiresAt;\r\n  }\r\n}\r\n","import Callback from \"./Callback\";\r\nimport SecuredRender from \"./Secured\";\r\nimport Auth from \"./Auth\";\r\n\r\n/**\r\n * \"Access token\" key in local storage\r\n */\r\nexport const ACCESS_TOKEN = \"access_token\";\r\n/**\r\n * \"ID token\" key in local storage\r\n */\r\nexport const ID_TOKEN = \"id_token\";\r\n/**\r\n * \"Expires at\" key in local storage\r\n */\r\nexport const EXPIRES_AT = \"expires_at\";\r\n/**\r\n * \"Saved url\" key in local storage. Saved URL is stored before redirection to\r\n * a protected route\r\n */\r\nexport const SAVED_URL = \"saved_url\";\r\n\r\n/**\r\n * Re-export components, functions and stuff\r\n */\r\nexport { Callback, SecuredRender };\r\n\r\n/**\r\n * Auth0 authentication handler\r\n */\r\nconst auth = new Auth();\r\nexport default auth;\r\n","import articles from \"./products/article\";\r\nimport catalogs from \"./products/catalog\";\r\n\r\n// Re-export to centralise reducers\r\nconst reducers = { articles, catalogs };\r\nexport default reducers;\r\n","/**\r\n * Extract the post processing function from the meta parameter only if post\r\n * processing is a function\r\n * @param {*} action\r\n */\r\nexport function extractPostProcessing(action) {\r\n  if (!action.meta) {\r\n    return null;\r\n  }\r\n  // Post processing\r\n  const postProcessing = action.meta.postProcessing;\r\n  return postProcessing instanceof Function ? postProcessing : null;\r\n}\r\n","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport {\r\n  LOAD,\r\n  LOADED,\r\n  LIST_LOAD,\r\n  LIST_LOADED,\r\n  CREATE,\r\n  CREATED,\r\n  UPDATE,\r\n  UPDATED,\r\n  DELETE,\r\n  DELETED\r\n} from \"./catalog\";\r\n\r\nimport API from \"../../api\";\r\nimport Log from \"../../services/log\";\r\nimport {\r\n  CATALOG_API_PATH\r\n} from \"../../components/products/Catalog\";\r\nimport { extractPostProcessing } from \"../utils/sagas\";\r\n\r\n/**\r\n * Loading catalogs list\r\n */\r\nfunction* loadCatalogs() {\r\n  Log.debug(\"Loading catalogs\", { tags: [\"Saga\", \"Catalog\"] });\r\n  const catalogs = yield call(API.get, CATALOG_API_PATH);\r\n  yield put({ type: LIST_LOADED, payload: catalogs });\r\n}\r\n\r\n/**\r\n * Load a single catalog\r\n * @param {*} action\r\n */\r\nfunction* loadCatalog(action) {\r\n  const id = action.payload;\r\n  Log.debug(`Loading #${id}`, { tags: [\"Saga\", \"Catalog\"] });\r\n  const catalog = yield call(API.get, `${CATALOG_API_PATH}/${id}`);\r\n  yield put({ type: LOADED, payload: catalog });\r\n}\r\n\r\n/**\r\n * Creating a new catalog\r\n * @param {*} action\r\n */\r\nfunction* createCatalog(action) {\r\n  Log.debug(`Creating`, action.payload, { tags: [\"Saga\", \"Catalog\"] });\r\n  const catalog = yield call(API.post, `${CATALOG_API_PATH}`, action.payload);\r\n  Log.debug(`Created`, catalog, { tags: [\"Saga\", \"Catalog\"] });\r\n  yield put({ type: CREATED, payload: catalog, meta: action.meta });\r\n  \r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing, catalog);\r\n  }\r\n}\r\n\r\n/**\r\n * Update a catalog\r\n * @param {*} action\r\n */\r\nfunction* updateCatalog(action) {\r\n  Log.debug(`Updating`, action.payload, { tags: [\"Saga\", \"Catalog\"] });\r\n  const id = action.payload.id;\r\n  const catalog = yield call(\r\n    API.patch,\r\n    `${CATALOG_API_PATH}/${id}`,\r\n    action.payload\r\n  );\r\n  yield put({ type: UPDATED, payload: catalog, meta: action.meta });\r\n  \r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing, catalog);\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a catalog\r\n * @param {*} action\r\n */\r\nfunction* deleteCatalog(action) {\r\n  const id = action.payload;\r\n  Log.info(`Deleting catalog#${id}`, { tags: [\"Saga\", \"Catalog\"] });\r\n  yield call(API.delete, `${CATALOG_API_PATH}/${id}`);\r\n  yield put({ type: DELETED, payload: id, meta: action.meta });\r\n  \r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing);\r\n  }\r\n}\r\n\r\n/**\r\n * Catalog actions\r\n */\r\nexport default function* watchCatalogs() {\r\n  yield takeEvery(LIST_LOAD, loadCatalogs);\r\n  yield takeEvery(LOAD, loadCatalog);\r\n  yield takeEvery(CREATE, createCatalog);\r\n  yield takeEvery(UPDATE, updateCatalog);\r\n  yield takeEvery(DELETE, deleteCatalog);\r\n}\r\n","import { call, put, takeEvery } from \"redux-saga/effects\";\r\n\r\nimport {\r\n  LOAD,\r\n  LOADED,\r\n  LIST_LOAD,\r\n  LIST_LOADED,\r\n  CREATE,\r\n  CREATED,\r\n  UPDATE,\r\n  UPDATED,\r\n  DELETE,\r\n  DELETED\r\n} from \"./article\";\r\n\r\nimport API from \"../../api\";\r\nimport Log from \"../../services/log\";\r\nimport { ARTICLE_API_PATH } from \"../../components/products/Article\";\r\nimport { extractPostProcessing } from \"../utils/sagas\";\r\n\r\nfunction* loadArticles() {\r\n  Log.debug(\"Loading articles\", { tags: [\"Saga\", \"Article\"] });\r\n  const articles = yield call(API.get, ARTICLE_API_PATH);\r\n  yield put({ type: LIST_LOADED, payload: articles });\r\n}\r\n\r\nfunction* loadArticle(action) {\r\n  const id = action.payload;\r\n  Log.debug(`Loading #${id}`, { tags: [\"Saga\", \"Article\"] });\r\n  const articles = yield call(API.get, `${ARTICLE_API_PATH}/${id}`);\r\n  yield put({ type: LOADED, payload: articles });\r\n}\r\n\r\nfunction* createArticle(action) {\r\n  Log.debug(`Creating`, action.payload, { tags: [\"Saga\", \"Article\"] });\r\n  const article = yield call(API.post, `${ARTICLE_API_PATH}`, action.payload);\r\n  yield put({ type: CREATED, payload: article, meta: action.meta });\r\n\r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing, article);\r\n  }\r\n}\r\n\r\nfunction* updateArticle(action) {\r\n  Log.debug(`Updating`, action.payload, { tags: [\"Saga\", \"Article\"] });\r\n  const id = action.payload.id;\r\n  const article = yield call(\r\n    API.patch,\r\n    `${ARTICLE_API_PATH}/${id}`,\r\n    action.payload\r\n  );\r\n  yield put({ type: UPDATED, payload: article, meta: action.meta });\r\n\r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing, article);\r\n  }\r\n}\r\n\r\nfunction* deleteArticle(action) {\r\n  const id = action.payload;\r\n  Log.info(`Deleting article#${id}`, { tags: [\"Saga\", \"Article\"] });\r\n  yield call(API.delete, `${ARTICLE_API_PATH}/${id}`);\r\n  yield put({ type: DELETED, payload: id, meta: action.meta });\r\n  \r\n  const postProcessing = extractPostProcessing(action);\r\n  if (postProcessing) {\r\n    yield call(postProcessing);\r\n  }\r\n}\r\n\r\nexport default function* watchArticles() {\r\n  yield takeEvery(LIST_LOAD, loadArticles);\r\n  yield takeEvery(LOAD, loadArticle);\r\n  yield takeEvery(CREATE, createArticle);\r\n  yield takeEvery(UPDATE, updateArticle);\r\n  yield takeEvery(DELETE, deleteArticle);\r\n}\r\n","import catalogsSagas from \"./products/catalog.sagas\";\r\nimport articlesSagas from \"./products/article.sagas\";\r\nimport { all } from \"redux-saga/effects\";\r\nimport Log from \"../services/log\";\r\n\r\n/**\r\n * Loading flag\r\n */\r\nfunction* onStart() {\r\n  yield Log.info(\"Starting\", { tags: \"Saga\" });\r\n}\r\n\r\n/**\r\n * Saga root\r\n */\r\nexport default function* mySaga() {\r\n  yield all([onStart(), catalogsSagas(), articlesSagas()]);\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport reducers from \"./reducers\";\r\nimport { logger, crachReporter } from \"./middleware\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport mySagas from \"./sagas\";\r\n\r\nconst rootReducers = combineReducers(reducers);\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = createStore(\r\n  rootReducers,\r\n  applyMiddleware(sagaMiddleware, logger, crachReporter)\r\n);\r\n\r\nsagaMiddleware.run(mySagas);\r\n\r\nexport default store;\r\n","import Log from \"../services/log\";\r\n\r\n/**\r\n * Logging all Redux transactions\r\n * @param {*} store\r\n */\r\nconst logger = store => next => action => {\r\n  Log.info(`Dispatching ${action.type}`, \"Redux\");\r\n  const result = next(action);\r\n  // Commenting because:\r\n  /**\r\n   * Error: You may not call store.getState() while the reducer is executing.\r\n   * The reducer has already received the state as an argument. Pass it down\r\n   * from the top reducer instead of reading it from the store.\r\n   */\r\n  Log.debug(\"Next state\", store.getState(), { tags: \"Redux\" });\r\n  return result;\r\n};\r\n\r\n/**\r\n * TODO: handling errors\r\n * @param {*} store\r\n */\r\nconst crachReporter = store => next => action => {\r\n  try {\r\n    return next(action);\r\n  } catch (err) {\r\n    Log.error(`Exception ${JSON.stringify(action)}: ${err}`, err, \"Redux\");\r\n    // console.error(`Redux Exception ${JSON.stringify(action)}`, err);\r\n  }\r\n};\r\n\r\nexport { logger, crachReporter };\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { CATALOG_PATH } from \"../components/products/Catalog\";\r\nimport { ARTICLE_PATH } from \"../components/products/Article\";\r\n\r\nexport default class SideMenu extends React.Component {\r\n  render() {\r\n    return (\r\n      <nav className=\"nav-sidebar\">\r\n        <h3 className=\"text-center\">LearnZone React</h3>\r\n        <div className=\"list-group\">\r\n          <NavLink\r\n            to={`${CATALOG_PATH}`}\r\n            activeClassName=\"active\"\r\n            className=\"list-group-item\">\r\n            Catalogs\r\n          </NavLink>\r\n          <NavLink\r\n            to={`${ARTICLE_PATH}`}\r\n            activeClassName=\"active\"\r\n            className=\"list-group-item\">\r\n            Articles\r\n          </NavLink>\r\n          <NavLink\r\n            to=\"/misc-info\"\r\n            activeClassName=\"active\"\r\n            className=\"list-group-item\">\r\n            Misc-info\r\n          </NavLink>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default class Toolbar extends React.Component {\r\n  toggleSideMenu(_event) {\r\n    document.getElementById(\"nav-wrapper\").classList.toggle(\"nav-toggle-menu\");\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"nav-toolbar navbar\">\r\n        <button\r\n          className=\"nav-toggler btn\"\r\n          type=\"button\"\r\n          onClick={this.toggleSideMenu}>\r\n          <span className=\"fas fa-bars\" />\r\n        </button>\r\n\r\n        {this.props.auth.isAuthenticated() ? (\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={this.props.auth.logout}>\r\n            <span className=\"fas fa-sign-out-alt\" />\r\n            Logout\r\n          </button>\r\n        ) : (\r\n          <button className=\"btn\" type=\"button\" onClick={this.props.auth.login}>\r\n            <span className=\"fas fa-user\" />\r\n            Login\r\n          </button>\r\n        )}\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Routes from \"../routes\";\r\n\r\nexport default class Main extends React.Component {\r\n  render() {\r\n    return (\r\n      <main className=\"nav-content\">\r\n        <Routes auth={this.props.auth} />\r\n      </main>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport SideMenu from \"./SideMenu\";\r\nimport Toolbar from \"./Toolbar\";\r\nimport Main from \"./Main\";\r\n\r\nexport default class Layout extends React.Component {\r\n  handleBackdropClick() {\r\n    document.getElementById(\"nav-wrapper\").classList.toggle(\"nav-toggle-menu\");\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"nav-wrapper\" className=\"nav-wrapper\">\r\n        <SideMenu />\r\n        <div className=\"nav-container\">\r\n          <Toolbar auth={this.props.auth} />\r\n          <Main auth={this.props.auth} />\r\n        </div>\r\n        <div className=\"nav-backdrop\" onClick={this.handleBackdropClick} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","//React\r\nimport React, { Component } from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n// Styles\r\nimport \"./stylesheets/application.scss\";\r\n// Services\r\nimport auth from \"./services/auth\";\r\nimport history from \"./routes/history\";\r\nimport store from \"./redux/configureStore\";\r\n// Components\r\nimport Layout from \"./layout/Layout\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Provider store={store}>\r\n        <BrowserRouter history={history}>\r\n          <Layout auth={auth} />\r\n        </BrowserRouter>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}